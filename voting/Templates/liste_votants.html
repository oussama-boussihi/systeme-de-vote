{% extends 'base.html' %}
{% load static %}
{% block title %}Liste des Votants{% endblock %}
{% block hero %}{% endblock %}

{% block content %}
  {# Message Popup – affiché uniquement s'il y a des messages #}
  {% if messages %}
  <div id="message-popup" class="message-popup">
    {% for message in messages %}
      <div class="message-item">
        <span class="message-text">{{ message }}</span>
        <button type="button" class="message-close">&times;</button>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="container mt-5 pt-5">
    <h2 class="text-center mb-4" style="color: #48B8A0; font-weight: bold;">
      Liste des Votants
    </h2>
    
    {% if votants %}
      <div class="table-responsive">
        <table class="table table-custom table-striped table-hover shadow-sm">
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Date de Naissance</th>
              <th>Identifiant</th>
            </tr>
          </thead>
          <tbody>
            {% for votant in votants %}
            <tr>
              <td>{{ votant.id }}</td>
              <td>{{ votant.nom }}</td>
              <td>{{ votant.prenom }}</td>
              <td>{{ votant.datenaissance }}</td>
              <td>{{ votant.identification }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-info text-center">
        Aucun votant enregistré pour le moment.
      </div>
    {% endif %}
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Gestion de la fermeture des pop-ups de message
      var closeButtons = document.querySelectorAll('.message-close');
      closeButtons.forEach(function(btn) {
        btn.addEventListener('click', function() {
          btn.parentElement.style.display = 'none';
        });
      });
    });
  </script>
{% endblock %}
